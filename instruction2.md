# 開発手順書

## フェーズ1: 認証基盤の構築（2週間）
### 1.1 NextAuth.js の実装
- ✅ サインイン/サインアップページのUI作成
- ✅ NextAuth.js の設定
- ✅ .env ファイルの設定
- ✅ ユーザー認証フローの実装
- ✅ セッション管理の実装
- ✅ ミドルウェアの実装（保護されたルートの設定）

### 1.2 データベース接続の確立
- ✅ データベーススキーマの作成
- ✅ Prisma Client の設定
- ✅ データベース接続テスト
- ✅ エラーハンドリングの実装

## フェーズ2: API接続機能の実装（2週間）
### 2.1 API接続設定ページの実装
- ✅ API接続設定UIの作成
- API接続情報の保存機能
- 接続テスト機能
- エラーハンドリング

### 2.2 データベース構造取得機能
- APIを通じたテーブル構造の取得
- 取得したデータの保存
- データセット削除機能

## フェーズ3: データマッピング機能の実装（3週間）
### 3.1 マッピングページの実装
- マッピングUIの作成
- テーブル/カラムの意味づけ機能
- 値の意味づけ機能
- テーブル連結機能

### 3.2 一括マッピング機能
- CSVアップロード機能
- マッピングデータの一括登録
- ユーザーID設定機能

## フェーズ4: カテゴリ管理機能の実装（2週間）
### 4.1 カテゴリ生成機能
- GPTを使用したカテゴリ自動生成
- カテゴリ編集UI
- カテゴリ保存機能

### 4.2 カテゴリ管理機能
- テーブルのグルーピング
- 連携制約の実装
- カテゴリ情報の保存/更新

## フェーズ5: AI機能の実装（3週間）
### 5.1 Vertex AI連携
- サービスアカウント管理
- トレーニングデータ管理
- モデル作成/トレーニング機能

### 5.2 ナレッジベース管理
- URLやPDFの登録機能
- ナレッジデータの暗号化
- データの検索/参照機能

## フェーズ6: 問い合わせ対応機能の実装（3週間）
### 6.1 問い合わせ処理
- ✅ 問い合わせUIの作成
- データ取得/要約機能
- 回答生成機能
- 回答修正機能

### 6.2 履歴管理
- 問い合わせ履歴の保存
- 履歴表示機能
- 回答の学習フィードバック

## フェーズ7: セキュリティ強化とテスト（2週間）
### 7.1 セキュリティ実装
- データ暗号化
- アクセス制御
- HTTPS通信の確保

### 7.2 テストの実施
- ユニットテスト
- 統合テスト
- セキュリティテスト
- パフォーマンステスト

## フェーズ8: デプロイと最適化（1週間）
### 8.1 デプロイ
- Replitへのデプロイ
- 環境変数の設定
- 動作確認

### 8.2 最適化
- パフォーマンス最適化
- エラーログの設定
- モニタリングの設定

# 開発の優先順位
1. フェーズ1: 認証基盤（必須）
2. フェーズ2: API接続（必須）
3. フェーズ3: データマッピング（必須）
4. フェーズ6: 問い合わせ対応（コア機能）
5. フェーズ4: カテゴリ管理（補助機能）
6. フェーズ5: AI機能（拡張機能）
7. フェーズ7: セキュリティ/テスト（品質担保）
8. フェーズ8: デプロイ/最適化（運用準備）

# 注意点
- 各フェーズで必ずテストを実施
- セキュリティは全フェーズで考慮
- MVPを意識し、必要最小限の機能から実装
- ユーザーフィードバックを随時反映

# 開発環境の準備
1. Node.js v18.0.0以上のインストール
2. 必要なパッケージのインストール
3. データベースの準備
4. 開発用の各種キーの取得
   - OpenAI API Key
   - Vertex AI の認証情報
